<!DOCTYPE html>
{% load static %}
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Registro - BLACK PANTHER</title>
  <link rel="stylesheet" href="{% static 'css/auth.css' %}" />
  
  <script>
    // Validación simple JS para que coincidan las contraseñas
    function validarFormulario(e) {
      const pass = document.getElementById('password');
      const confirm = document.getElementById('confirm_password');
      if(pass.value !== confirm.value) {
        e.preventDefault();
        alert('Las contraseñas no coinciden');
        pass.classList.add('invalid');
        confirm.classList.add('invalid');
        return false;
      } else {
        pass.classList.remove('invalid');
        confirm.classList.remove('invalid');
      }
      return true;
    }

    // Función para mostrar bandera junto al texto en el select
    function formatCountry(option) {
      if (!option.id) return option.text;
      var flagCode = option.element.getAttribute('data-flag');
      if (!flagCode) return option.text;
      return (
        '<span class="flag-icon flag-icon-' +
        flagCode +
        '" style="margin-right:8px;"></span>' +
        option.text
      );
    }
  </script>
</head>
<body>
  <header class="header">
    <h1>BLACK PANTHER</h1>
    <nav class="nav">
      <ul>
        <li><a href="{% url 'tienda:inicio' %}">Inicio</a></li>
        <li><a href="#">Subastas</a></li>
        <li><a href="#">Mis Subastas</a></li>
        <li><a href="#">Contacto</a></li>
        <li><a href="{% url 'tienda:registro' %}">Crear Usuario</a></li>
        <li><a href="{% url 'tienda:login' %}">Iniciar Sesión</a></li>
      </ul>
    </nav>
  </header>

  <div class="login-container">
    <h1>Crear Cuenta</h1>
    <form action="{% url 'tienda:registro' %}" method="post" onsubmit="return validarFormulario(event)">
      {% csrf_token %}

      <div class="form-row">
        <div class="input-group">
          <label for="primer_nombre">Primer Nombre</label>
          <input type="text" id="primer_nombre" name="primer_nombre" placeholder="Primer nombre" required />
        </div>
        <div class="input-group">
          <label for="segundo_nombre">Segundo Nombre</label>
          <input type="text" id="segundo_nombre" name="segundo_nombre" placeholder="Segundo nombre" />
        </div>
      </div>

      <div class="form-row">
        <div class="input-group">
          <label for="primer_apellido">Primer Apellido</label>
          <input type="text" id="primer_apellido" name="primer_apellido" placeholder="Primer apellido" required />
        </div>
        <div class="input-group">
          <label for="segundo_apellido">Segundo Apellido</label>
          <input type="text" id="segundo_apellido" name="segundo_apellido" placeholder="Segundo apellido" />
        </div>
      </div>

      <div class="form-row">
        <div class="input-group">
          <label for="telefono">Número de Teléfono</label>
          <input type="tel" id="telefono" name="telefono" placeholder="Ej. +593 999999999" />
        </div>
        <div class="input-group">
          <label for="pais">País</label>
          <select id="pais" name="pais" required>
            <option value="">Seleccione un país</option>
            <option value="EC" data-flag="ec">Ecuador</option>
            <option value="US" data-flag="us">Estados Unidos</option>
            <option value="MX" data-flag="mx">México</option>
            <option value="AR" data-flag="ar">Argentina</option>
            <option value="CO" data-flag="co">Colombia</option>
            <option value="ES" data-flag="es">España</option>
            <option value="FR" data-flag="fr">Francia</option>
            <option value="DE" data-flag="de">Alemania</option>
            <option value="JP" data-flag="jp">Japón</option>
            <option value="CN" data-flag="cn">China</option>
          </select>
        </div>
      </div>

      <div class="form-row">
        <div class="input-group">
          <label for="tipo_usuario">¿Eres de Universidad o Trabajo?</label>
          <select id="tipo_usuario" name="tipo_usuario" required>
            <option value="">Seleccione</option>
            <option value="universidad">Universidad</option>
            <option value="trabajo">Trabajo</option>
            <option value="otro">Otro</option>
          </select>
        </div>
        <div class="input-group">
          <label for="correo">Correo Electrónico</label>
          <input type="email" id="correo" name="correo" placeholder="email@ejemplo.com" required />
        </div>
      </div>

      <div class="form-row">
        <div class="input-group">
          <label for="password">Contraseña</label>
          <input type="password" id="password" name="password" placeholder="Contraseña" required />
        </div>
        <div class="input-group">
          <label for="confirm_password">Confirmar Contraseña</label>
          <input type="password" id="confirm_password" name="confirm_password" placeholder="Confirmar contraseña" required />
        </div>
      </div>

      <button type="submit" class="btn-primary">Crear Cuenta</button>
    </form>
  </div>
</body>
</html>